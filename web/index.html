<!doctype html>
<html lang="en">

<head>
  <title>ESP_thermostat</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="shortcut icon" type="image/png" href="https://img.icons8.com/ios/50/000000/thermometer-automation.png" />
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body class="bg-secondary  col-sm-6 mx-auto">
  <div class="card text-center">
    <div class="card-body col-sm-12">
      <div id="accordion">
        <div class="card">
          <div class="card-header" id="headingOne">
            <h5 class="mb-0">
              <button class="btn btn-link" data-toggle="collapse" data-target="#collapseCurrent" aria-expanded="true"
                aria-controls="collapseCurrent">
                CURRENT WORKING MODE
              </button>
            </h5>
          </div>

          <div id="collapseCurrent" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
            <div class="card-body">
              <div class="row text-center">
                <div class="d-inline col-sm-4 h4 my-auto" id="thermo_date">___ 00:00</div>
                <div class="d-inline col-sm-4 h1 my-auto" id="thermo_temp">--.-</div>
                <div class="d-inline col-sm-4 h4 my-auto" id="thermo_temp_target">no setpoint</div>
              </div>
              <br>
              <div class="my-auto" id="thermo_heater">heater ---</div>
              <div class="my-auto" id="thermo_mode">---</div>
              <div class="my-auto" id="thermo_pwr_off">power off in - minutes</div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="headingTwo">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseSettings"
                aria-expanded="false" aria-controls="collapseSettings">
                CONTROL SETTINGS
              </button>
            </h5>
          </div>
          <div id="collapseSettings" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
            <div class="card-body">
              <div class="form-group row">
                <label for="ctrl_mode" class="col-sm-6 col-form-label text-left">Control mode</label>
                <div class="input-group col-sm-6">
                  <select class="custom-select" id="ctrl_mode">
                    <option selected value="0">OFF</option>
                    <option value="1">MANUAL</option>
                    <option value="2">AUTO</option>
                    <option value="3">PROGRAM</option>
                  </select>
                </div>
              </div>
              <div class="form-group row" id="manual_settings">
                <label for="cont_cycle" class="col-sm-6 col-form-label text-left">Manual settings</label>
                <div class="input-group col-sm-6">
                  <select id="cont_cycle" class="custom-select">
                    <option selectd value="0">ON</option>
                    <option value="1">ON/OFF</option>
                  </select>
                </div>
              </div>
              <div class="form-group row" id="manual_pulse_on">
                <label for="cycle_on" class="col-sm-6 col-form-label text-left">Pulse ON [minutes]</label>
                <div class="input-group col-sm-6">
                  <input type="number" value="10" min="0" max="1440" step="1" class="form-control" id="cycle_on">
                </div>
              </div>
              <div class="form-group row" id="manual_pulse_off">
                <label for="cycle_off" class="col-sm-6 col-form-label text-left">Pulse OFF [minutes]</label>
                <div class="input-group col-sm-6">
                  <input type="number" value="10" min="0" max="1440" step="1" class="form-control" id="cycle_off">
                </div>
              </div>
              <div class="form-group row" id="auto_setpoint">
                <label for="setpoint" class="col-sm-6 col-form-label text-left">Setpoint</label>
                <div class="input-group col-sm-6">
                  <input type="number" value="10" min="0" max="30" step="0.1" class="form-control" id="setpoint">
                </div>
              </div>
              <div class="form-group row" id="program_select">
                <label for="program_name" class="col-sm-6 col-form-label text-left">Program</label>
                <div class="input-group col-sm-6">
                  <select class="custom-select" id="program_name">
                  </select>
                </div>
              </div>
              <div id="power_off_timer">
                <hr>
                <div class="form-group row">
                  <label for="off_timer" class="col-sm-6 col-form-label text-left">Power OFF timer [minutes]</label>
                  <div class="input-group col-sm-6">
                    <select id="off_timer_en" class="custom-select">
                      <option selectd value="0">Disabled</option>
                      <option value="1">Enabled</option>
                      <input type="number" value="10" min="0" max="1440" step="1" class="form-control" id="off_timer">
                    </select>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="mx-auto">
                  <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                    <div class="btn-group mr-2" role="group" aria-label="First group">
                      <button type="button" class="btn btn-primary" id="settings_reset">Reset</button>
                    </div>
                    <div class="btn-group mr-2" role="group" aria-label="Second group">
                      <button type="button" class="btn btn-primary" id="settings_save">Save</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="headingThree">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapsePrograms"
                aria-expanded="true" aria-controls="collapsePrograms">
                PROGRAMS
              </button>
            </h5>
          </div>

          <div id="collapsePrograms" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
            <div class="card-body">
              <div class="form-group row" id="prg_select_row">
                <label for="program_list" class="col-sm-6 col-form-label text-left">Program</label>
                <div class="input-group col-sm-6">
                  <select class="custom-select" id="program_list">
                  </select>
                </div>
              </div>
              <div class="form-group row" id="prg_rename_row">
                <label for="sel_prg_name" class="col-sm-6 col-form-label text-left">Name</label>
                <div class="input-group col-sm-6">
                  <input type="text" maxlength="32" class="form-control" id="sel_prg_name">
                </div>
              </div>
              <form id=prg_periods>
                <div class="form-group row">
                  <label for="prg_def_sp" class="col-sm-6 col-form-label text-left">Default setpoint</label>
                  <div class="input-group col-sm-6">
                    <input type="number" min="0" max="99" step="0.1" placeholder="°C" class="form-control"
                      id="prg_def_sp" onchange="update_def_sp();">
                  </div>
                </div>
                <div class="form-row">
                  <div class="col mx-0 px-0">
                    <button type="button" class="btn btn-default" placeholder="day" onclick="add_prg_period(0);">
                      <i class="fa fa-plus-circle" aria-hidden="true"></i>
                    </button>
                  </div>
                  <div class="col-xs-2 ml-0 pl-0 mr-2 pr-0">
                    <select class="custom-select" id="wk_day_0" onchange="update_wd_period(0);">
                      <option value="1">Mon</option>
                      <option value="2">Tue</option>
                      <option value="3">Wed</option>
                      <option value="4">Thu</option>
                      <option value="5">Fri</option>
                      <option value="6">Sat</option>
                      <option value="7">Sun</option>
                      <option value="8">All</option>
                    </select>
                  </div>
                  <div class="col-xs-1 mx-0 px-0">
                    <input type="number" min="0" max="24" step="1" placeholder="hh" class="form-control" id="start_hh_0"
                      onchange="update_start_period(0);">
                  </div>
                  <div class="col-xs-1 ml-0 mr-2 px-0">
                    <input type="number" min="0" max="59" step="1" placeholder="mm" class="form-control" id="start_mm_0"
                      onchange="update_start_period(0);">
                  </div>
                  <div class="col-xs-1 mx-0 px-0">
                    <input type="number" min="0" max="24" step="1" placeholder="hh" class="form-control" id="end_hh_0"
                      onchange="update_end_period(0);">
                  </div>
                  <div class="col-xs-1 ml-0 mr-2 px-0">
                    <input type="number" min="0" max="59" step="1" placeholder="mm" class="form-control" id="end_mm_0"
                      onchange="update_end_period(0);">
                  </div>
                  <div class="col-xs-1 mx-0 px-0">
                    <input type="number" min="0" max="99" step="0.1" placeholder="°C" class="form-control" id="sp_0"
                      onchange="update_sp_period(0);">
                  </div>
                  <div class="col mx-0 px-0">
                    <button type="button" class="btn btn-default" onclick="del_prg_period(0);">
                      <i class="fa fa-trash" aria-hidden="true"></i>
                    </button>
                  </div>
                </div>
                <div class="form-row">
                  <div class="col mx-0 px-0">
                    <button type="button" class="btn btn-default" onclick="add_prg_period(0);">
                      <i class="fa fa-plus-circle" aria-hidden="true"></i>
                    </button>
                  </div>
                </div>
              </form>
              <div><br></div>
              <div class="row">
                <div class="mx-auto">
                  <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                    <div class="btn-group mr-2" role="group" aria-label="First group">
                      <button type="button" class="btn btn-primary" id="programs_reset">Reset</button>
                    </div>
                    <div class="btn-group mr-2" role="group" aria-label="Second group">
                      <button type="button" class="btn btn-primary" id="programs_rename">Rename</button>
                    </div>
                    <div class="btn-group mr-2" role="group" aria-label="Third group">
                      <button type="button" class="btn btn-primary" id="programs_new">New</button>
                    </div>
                    <div class="btn-group mr-2" role="group" aria-label="Fourth group">
                      <button type="button" class="btn btn-primary" data-toggle="modal"
                        data-target="#confirmDelete">Delete</button>
                    </div>
                    <div class="modal fade" id="confirmDelete" tabindex="-1" role="dialog"
                      aria-labelledby="confirmDeleteLabel" aria-hidden="true">
                      <div class="modal-dialog" role="document">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="confirmDeleteLabel">Confirm Delete</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <div class="modal-body">
                            <p>Current program will be deleted.</p>
                            <p>There will be no way to recover it.</p>
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-primary" data-dismiss="modal"
                              id="programs_delete">Delete</button>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="btn-group mr-2" role="group" aria-label="Fifh group">
                      <button type="button" class="btn btn-primary" id="programs_save">Save</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="headingFour">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseAdvSettings"
                aria-expanded="false" aria-controls="collapseAdvSettings">
                ADVANCED CONTROL SETTINGS
              </button>
            </h5>
          </div>
          <div id="collapseAdvSettings" class="collapse" aria-labelledby="headingFour" data-parent="#accordion">
            <div class="card-body">
              <div class="form-group row">
                <label for="adv_sett_kp" class="col-sm-6 col-form-label text-left">Kp</label>
                <div class="input-group col-sm-6">
                  <input type="number" value="1" min="-32768" max="32767" step="1" class="form-control"
                    id="adv_sett_kp">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_kd" class="col-sm-6 col-form-label text-left">Kd</label>
                <div class="input-group col-sm-6">
                  <input type="number" value="5" min="-32768" max="32767" step="1" class="form-control"
                    id="adv_sett_kd">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_ki" class="col-sm-6 col-form-label text-left">Ki</label>
                <div class="input-group col-sm-6">
                  <input type="number" value="5" min="-32768" max="32767" step="1" class="form-control"
                    id="adv_sett_ki">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_u_max" class="col-sm-6 col-form-label text-left">U max</label>
                <div class="input-group col-sm-6">
                  <input type="number" value="60" min="1" max="32767" step="1" class="form-control" id="adv_sett_u_max">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_heater_on_min" class="col-sm-6 col-form-label text-left">Heater ON min
                  [min]</label>
                <div class="input-group col-sm-6">
                  <input type="number" value="2" min="0" max="32767" step="1" class="form-control"
                    id="adv_sett_heater_on_min">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_heater_on_max" class="col-sm-6 col-form-label text-left">Heater ON max
                  [min]</label>
                <div class="input-group col-sm-6">
                  <input type="number" value="13" min="0" max="32767" step="1" class="form-control"
                    id="adv_sett_heater_on_max">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_heater_on_off" class="col-sm-6 col-form-label text-left">Heater ON/OFF period
                  [min]</label>
                <div class="input-group col-sm-6">
                  <input type="number" value="15" min="0" max="32767" step="1" class="form-control"
                    id="adv_sett_heater_on_off">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_heater_cold" class="col-sm-6 col-form-label text-left">Heater cold [min]</label>
                <div class="input-group col-sm-6">
                  <input type="number" value="120" min="0" max="32767" step="1" class="form-control"
                    id="adv_sett_heater_cold">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_warm_up_period" class="col-sm-6 col-form-label text-left">Warm up period
                  [min]</label>
                <div class="input-group col-sm-6">
                  <input type="number" value="12" min="0" max="32767" step="1" class="form-control"
                    id="adv_sett_warm_up_period">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_wup_heater_on" class="col-sm-6 col-form-label text-left">Heater ON (warm up)
                  [min]</label>
                <div class="input-group col-sm-6">
                  <input type="number" value="3" min="0" max="32767" step="1" class="form-control"
                    id="adv_sett_wup_heater_on">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_wup_heater_off" class="col-sm-6 col-form-label text-left">Heater OFF (warm up)
                  [min]</label>
                <div class="input-group col-sm-6">
                  <input type="number" value="3" min="0" max="32767" step="1" class="form-control"
                    id="adv_sett_wup_heater_off">
                </div>
              </div>
              <div class="row">
                <div class="mx-auto">
                  <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                    <div class="btn-group mr-2" role="group" aria-label="First group">
                      <button type="button" class="btn btn-primary" id="adv_settings_reset">Reset</button>
                    </div>
                    <div class="btn-group mr-2" role="group" aria-label="Second group">
                      <button type="button" class="btn btn-primary" id="adv_settings_save">Save</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="headingFive">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseRemoteLogSettings"
                aria-expanded="false" aria-controls="collapseRemoteLogSettings">
                REMOTE LOG SETTINGS
              </button>
            </h5>
          </div>
          <div id="collapseRemoteLogSettings" class="collapse" aria-labelledby="headingFive" data-parent="#accordion">
            <div class="card-body">
              <div class="form-group row">
                <label for="rl_enabled" class="col-sm-6 col-form-label text-left">Remote log</label>
                <div class="input-group col-sm-6">
                  <select class="custom-select" id="rl_enabled">
                    <option selected value="0">DISABLED</option>
                    <option value="1">ENABLED</option>
                  </select>
                </div>
              </div>
              <div class="form-group row">
                <label for="rl_host" class="col-sm-6 col-form-label text-left">Host</label>
                <div class="input-group col-sm-6">
                  <input type="text" placeholder="192..1" class="form-control" id="rl_host">
                </div>
              </div>
              <div class="form-group row">
                <label for="rl_port" class="col-sm-6 col-form-label text-left">Port</label>
                <div class="input-group col-sm-6">
                  <input type="number" placeholder="0" min="1" max="65535" step="1" class="form-control" id="rl_port">
                </div>
              </div>
              <div class="form-group row">
                <label for="rl_path" class="col-sm-6 col-form-label text-left">Path</label>
                <div class="input-group col-sm-6">
                  <input type="text" placeholder="/ity_log" class="form-control" id="rl_path">
                </div>
              </div>
              <div class="row">
                <div class="mx-auto">
                  <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                    <div class="btn-group mr-2" role="group" aria-label="First group">
                      <button type="button" class="btn btn-primary" id="rl_reset">Reset</button>
                    </div>
                    <div class="btn-group mr-2" role="group" aria-label="Second group">
                      <button type="button" class="btn btn-primary" id="rl_save">Save</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="headingSix">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseDiagnosticEvents"
                aria-expanded="false" aria-controls="collapseDiagnosticEvents">
                EVENTS JOURNAL
              </button>
            </h5>
          </div>
          <div id="collapseDiagnosticEvents" class="collapse" aria-labelledby="headingSix" data-parent="#accordion">
            <div class="card-body">
              <div class="table-responsive text-nowrap table-sm small">
                <table class="table table-striped" id="diag_event_table">
                  <thead>
                    <tr>
                      <th scope="col">Timestamp</th>
                      <th scope="col">Type</th>
                      <th scope="col">Code</th>
                      <th scope="col">Desc</th>
                      <th scope="col">Value</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="text-success">
                      <th scope="row">Wed Feb 05 09:41:09 2020</th>
                      <td>ERROR</td>
                      <td>0054</td>
                      <td>Example (Acknowledged)</td>
                      <td>00000000</td>
                    </tr>
                    <tr>
                      <th scope="row">Wed Feb 05 09:41:09 2020</th>
                      <td>ERROR</td>
                      <td>0054</td>
                      <td>Example</td>
                      <td>00000000</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="row">
                <div class="mx-auto">
                  <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                    <div class="btn-group mr-2" role="group" aria-label="First group">
                      <button type="button" class="btn btn-primary" id="diag_e_refresh">Refresh</button>
                    </div>
                    <div class="btn-group mr-2" role="group" aria-label="Second group">
                      <button type="button" class="btn btn-primary" id="diag_e_ack">Acknowledge</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer text-muted ">
      <div>By <a href="mailto:quackmore-ff@yahoo.com">Quackmore</a></div>
      <div id="app_version">version </div>
      <div><a href="https://icons8.com/icon/7240/thermometer-automation">Thermometer Automation icon by Icons8</a></div>
    </div>
  </div>
  <div class="modal fade bd-example-modal-lg" data-backdrop="static" data-keyboard="false" tabindex="-1">
    <div class="modal-dialog modal-sm">
      <div class="modal-content" style="width: 48px">
        <span class="spinner-border" role="status"></span>
      </div>
    </div>
  </div>
  <!-- JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS, then custom script -->
  <!-- don't use slim if you need ajax -->
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  <script type="text/javascript"> $('.modal').modal('show');</script>
  <script src="html_dyn.js"></script>
  <script src="event_codes.js"></script>
</body>

</html>