function update_page(){update_diagnostic_events()}function esp_get_diagnostic_events(t){$.ajax({type:"GET",url:esp8266.url+"/api/diagnostic",dataType:"json",crossDomain:esp8266.cors,timeout:5e3,success:function(e){t(e),setTimeout((function(){$(".modal").modal("hide")}),1e3)},error:function(t,e,n){ajax_error(t,e,n),setTimeout((function(){$(".modal").modal("hide")}),1e3)}})}function update_diagnostic_events(){esp_get_diagnostic_events(update_diagnostic_events_table)}function update_diagnostic_events_table(t){$("#events_table").empty(),$("#events_table").append('<thead><tr><th scope="col">Timestamp</th><th scope="col">Type</th><th scope="col">Code</th><th scope="col">Desc</th><th scope="col">Value</th></tr></thead><tbody>');for(var e=0;e<t.diag_events.length;e++){var n=new Date(1e3*t.diag_events[e].ts);1==t.diag_events[e].ack?$("#events_table").append('<tr class="text-success"><td>'+n.toString().substring(4,24)+"</td><td>"+get_evnt_str(t.diag_events[e].type)+"</td><td>"+String("0000"+t.diag_events[e].code).slice(-4)+"</td><td>"+get_code_str(t.diag_events[e].code)+"</td><td>"+t.diag_events[e].val+"</td></tr>"):$("#events_table").append("<tr><td>"+n.toString().substring(4,24)+"</td><td>"+get_evnt_str(t.diag_events[e].type)+"</td><td>"+String("0000"+t.diag_events[e].code).slice(-4)+"</td><td>"+get_code_str(t.diag_events[e].code)+"</td><td>"+t.diag_events[e].val+"</td></tr>")}$("#events_table").append("</tbody>")}function get_evnt_str(t){var e=[];return e[parseInt(1,16)]="FATAL",e[parseInt(2,16)]="ERROR",e[parseInt(4,16)]="WARN",e[parseInt(8,16)]="INFO",e[parseInt(10,16)]="DEBUG",e[parseInt(20,16)]="TRACE",e[parseInt(t,16)]}function esp_ack_diagnostic_events(t){$.ajax({type:"POST",url:esp8266.url+"/api/diagnostic",crossDomain:esp8266.cors,timeout:2e3,error:function(t,e,n){ajax_error(t,e,n)}})}$(document).ready((function(){setTimeout((function(){$("#awaiting").modal("hide")}),1e3),update_page()})),$("#events_refresh").on("click",(function(){$("#awaiting").modal("show"),update_diagnostic_events()})),$("#events_ack").on("click",(function(){esp_ack_diagnostic_events((function(t){alert(""+JSON.parse(t.responseText).error.reason)})),update_diagnostic_events()}));