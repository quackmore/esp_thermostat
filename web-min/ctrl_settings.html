<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="shortcut icon" type="image/png" href="https://img.icons8.com/ios/50/000000/thermometer-automation.png" />
  <meta name="description" content="">
  <meta name="author" content="">
  <title>ESP Thermostat</title>

  <!-- Bootstrap core CSS 
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"> -->
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"
    integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <!-- Custom styles for this template -->
  <link href="sidebar.css" rel="stylesheet">
  <link href="bootstrap-clockpicker.min.css" rel="stylesheet">

</head>

<body>

  <div class="d-flex" id="wrapper">

    <!-- Sidebar -->
    <div class="border-right side  bg-sidebar" id="sidebar-wrapper">
      <div class="sidebar-heading">ESP THERMOSTAT</div>
      <div class="list-group list-group-flush border-right">
        <a href="index.html" class="list-group-item list-group-item-action bg-sidebar">Home</a>
        <a href="history.html" class="list-group-item list-group-item-action bg-sidebar">Data History</a>
        <a href="ctrl_settings.html" class="list-group-item list-group-item-action bg-sidebar">Thermostat settings</a>
        <a href="events_journal.html" class="list-group-item list-group-item-action bg-sidebar">Events journal</a>
        <a href="device.html" class="list-group-item list-group-item-action bg-sidebar">Device settings</a>
        <a href="debug.html" class="list-group-item list-group-item-action bg-sidebar">Device Debug</a>
        <a href="info.html" class="list-group-item list-group-item-action bg-sidebar">Info & Credits</a>
      </div>
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content ################################################################################-->
    <div id="page-content-wrapper">

      <nav class="navbar navbar-expand-lg navbar-dark border-bottom" id=content-navbar>
        <span id="content-title">Thermostat settings</span>
        <button class="btn ml-auto" id="menu-toggle">
          <span class="navbar-toggler-icon"></span>
        </button>
      </nav>

      <div class="container-fluid">
        <div class="card-columns mt-3">
          <div class="card border-info">
            <div class="card-body">
              <div class="card-title">
                <div class="row no-gutters">
                  <h5 class="card-title my-auto"><i class="fa fa-cogs"></i> Settings</h5>
                </div>
              </div>
              <div class="form-group row">
                <label for="sett_ctrl_mode" class="col-form-label col-6 my-auto">Control mode</label>
                <div class="input-group-sm col-6 ml-auto my-auto border-0">
                  <select class="custom-select" id="sett_ctrl_mode">
                    <option selected value="0">OFF</option>
                    <option value="1">MANUAL</option>
                    <option value="2">AUTO</option>
                    <option value="3">PROGRAM</option>
                  </select>
                </div>
              </div>
              <div id="manual_settings">
                <div class="form-group row">
                  <label for="sett_manual" class="col-form-label col-6 my-auto">Manual settings</label>
                  <div class="input-group-sm col-6 ml-auto my-auto border-0">
                    <select id="sett_manual" class="custom-select">
                      <option selected value="0">ON</option>
                      <option value="1">ON/OFF</option>
                    </select>
                  </div>
                </div>
                <div id="manual_settings_timers">
                  <div class="form-group row">
                    <label for="sett_man_on" class="col-form-label col-6 my-auto">Pulse ON [minutes]</label>
                    <div class="input-group-sm col-6 ml-auto my-auto border-0">
                      <input type="number" value="10" min="0" max="1440" step="1" class="form-control" id="sett_man_on">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label for="sett_man_off" class="col-form-label col-6 my-auto">Pulse OFF [minutes]</label>
                    <div class="input-group-sm col-6 ml-auto my-auto border-0">
                      <input type="number" value="10" min="0" max="1440" step="1" class="form-control"
                        id="sett_man_off">
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group row" id="sett_auto">
                <label for="sett_auto_sp" class="col-form-label col-6 my-auto">Setpoint</label>
                <div class="input-group-sm col-6 ml-auto my-auto border-0">
                  <input type="number" value="10" min="0" max="30" step="0.1" class="form-control" id="sett_auto_sp">
                </div>
              </div>
              <div class="form-group row" id="sett_prg">
                <label for="sett_prg_name" class="col-form-label col-6 my-auto">Program</label>
                <div class="input-group-sm col-6 ml-auto my-auto border-0">
                  <select class="custom-select" id="sett_prg_name">
                  </select>
                </div>
              </div>
              <div id="sett_pwr_off">
                <hr>
                <div class="form-group row">
                  <label for="sett_off_timer" class="col-form-label col-6 my-auto">Power OFF timer [minutes]</label>
                  <div class="input-group-sm col-6 ml-auto my-auto border-0">
                    <select id="sett_off_timer_en" class="custom-select">
                      <option selectd value="0">Disabled</option>
                      <option value="1">Enabled</option>
                      <input type="number" value="10" min="0" max="1440" step="1" class="form-control"
                        id="sett_off_timer">
                    </select>
                  </div>
                </div>
              </div>
              <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups" id="info_buttons">
                <div class="btn-group mr-2" role="group" aria-label="First group">
                  <button type="button" class="btn btn-primary" id="sett_refresh">Refresh</button>
                </div>
                <div class="btn-group mr-2" role="group" aria-label="Second group">
                  <button type="button" class="btn btn-primary" id="sett_save">Save</button>
                </div>
              </div>
            </div>
          </div>
          <div class="card border-info">
            <div class="card-body">
              <div class="card-title">
                <div class="row no-gutters">
                  <h5 class="card-title my-auto"><i class="fa fa-cogs"></i> Program list</h5>
                </div>
              </div>
              <div class="table-responsive text-nowrap table-sm table-bordered vh-30">
                <table class="table table-striped" id="programs_table">
                </table>
              </div>
              <div>
                <p></p>
              </div>
              <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups" id="programs_buttons">
                <div class="btn-group mr-2" role="group" aria-label="First group">
                  <button type="button" class="btn btn-primary" id="programs_refresh">Refresh</button>
                </div>
                <div class="btn-group mr-2" role="group" aria-label="Second group">
                  <button type="button" class="btn btn-primary" id="programs_new">New</button>
                </div>
              </div>
            </div>
          </div>
          <div class="card border-info">
            <div class="card-body">
              <div class="card-title">
                <div class="row no-gutters">
                  <h5 class="card-title my-auto"><i class="fa fa-cogs"></i> Remote log settings</h5>
                </div>
              </div>
              <div class="form-group row">
                <label for="rl_enabled" class="col-form-label col-6 my-auto">Remote log</label>
                <div class="input-group-sm col-6 ml-auto my-auto border-0">
                  <select class="custom-select" id="rl_enabled">
                    <option selected value="0">DISABLED</option>
                    <option value="1">ENABLED</option>
                  </select>
                </div>
              </div>
              <div class="form-group row">
                <label for="rl_host" class="col-form-label col-6 my-auto">Host</label>
                <div class="input-group-sm col-6 ml-auto my-auto border-0">
                  <input type="text" placeholder="192..1" class="form-control" id="rl_host">
                </div>
              </div>
              <div class="form-group row">
                <label for="rl_port" class="col-form-label col-6 my-auto">Port</label>
                <div class="input-group-sm col-6 ml-auto my-auto border-0">
                  <input type="number" placeholder="0" min="1" max="65535" step="1" class="form-control" id="rl_port">
                </div>
              </div>
              <div class="form-group row">
                <label for="rl_path" class="col-form-label col-6 my-auto">Path</label>
                <div class="input-group-sm col-6 ml-auto my-auto border-0">
                  <input type="text" placeholder="/ity_log" class="form-control" id="rl_path">
                </div>
              </div>
              <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups" id="rl_sett_buttons">
                <div class="btn-group mr-2" role="group" aria-label="First group">
                  <button type="button" class="btn btn-primary" id="rl_sett_refresh">Refresh</button>
                </div>
                <div class="btn-group mr-2" role="group" aria-label="Second group">
                  <button type="button" class="btn btn-primary" id="rl_sett_save">Save</button>
                </div>
              </div>
            </div>
          </div>
          <div class="card border-info">
            <div class="card-body">
              <div class="card-title">
                <div class="row no-gutters">
                  <h5 class="card-title my-auto"><i class="fa fa-cogs"></i> Advanced Settings</h5>
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_kp" class="col-form-label col-8 my-auto">Kp</label>
                <div class="input-group-sm col-4 ml-auto my-auto border-0">
                  <input type="number" value="1" min="-32768" max="32767" step="1" class="form-control"
                    id="adv_sett_kp">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_kd" class="col-form-label col-8 my-auto">Kd</label>
                <div class="input-group-sm col-4 ml-auto my-auto border-0">
                  <input type="number" value="5" min="-32768" max="32767" step="1" class="form-control"
                    id="adv_sett_kd">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_ki" class="col-form-label col-8 my-auto">Ki</label>
                <div class="input-group-sm col-4 ml-auto my-auto border-0">
                  <input type="number" value="5" min="-32768" max="32767" step="1" class="form-control"
                    id="adv_sett_ki">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_u_max" class="col-form-label col-8 my-auto">U max</label>
                <div class="input-group-sm col-4 ml-auto my-auto border-0">
                  <input type="number" value="60" min="1" max="32767" step="1" class="form-control" id="adv_sett_u_max">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_heater_on_min" class="col-form-label col-8 my-auto">Heater ON min
                  [min]</label>
                <div class="input-group-sm col-4 ml-auto my-auto border-0">
                  <input type="number" value="2" min="0" max="32767" step="1" class="form-control"
                    id="adv_sett_heater_on_min">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_heater_on_max" class="col-form-label col-8 my-auto">Heater ON max
                  [min]</label>
                <div class="input-group-sm col-4 ml-auto my-auto border-0">
                  <input type="number" value="13" min="0" max="32767" step="1" class="form-control"
                    id="adv_sett_heater_on_max">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_heater_on_off" class="col-form-label col-8 my-auto">Heater ON/OFF period
                  [min]</label>
                <div class="input-group-sm col-4 ml-auto my-auto border-0">
                  <input type="number" value="15" min="0" max="32767" step="1" class="form-control"
                    id="adv_sett_heater_on_off">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_heater_cold" class="col-form-label col-8 my-auto">Heater cold [min]</label>
                <div class="input-group-sm col-4 ml-auto my-auto border-0">
                  <input type="number" value="120" min="0" max="32767" step="1" class="form-control"
                    id="adv_sett_heater_cold">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_warm_up_period" class="col-form-label col-8 my-auto">Warm up period
                  [min]</label>
                <div class="input-group-sm col-4 ml-auto my-auto border-0">
                  <input type="number" value="12" min="0" max="32767" step="1" class="form-control"
                    id="adv_sett_warm_up_period">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_wup_heater_on" class="col-form-label col-8 my-auto">Heater ON (warm up)
                  [min]</label>
                <div class="input-group-sm col-4 ml-auto my-auto border-0">
                  <input type="number" value="3" min="0" max="32767" step="1" class="form-control"
                    id="adv_sett_wup_heater_on">
                </div>
              </div>
              <div class="form-group row">
                <label for="adv_sett_wup_heater_off" class="col-form-label col-8 my-auto">Heater OFF (warm up)
                  [min]</label>
                <div class="input-group-sm col-4 ml-auto my-auto border-0">
                  <input type="number" value="3" min="0" max="32767" step="1" class="form-control"
                    id="adv_sett_wup_heater_off">
                </div>
              </div>
              <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups" id="adv_sett_buttons">
                <div class="btn-group mr-2" role="group" aria-label="First group">
                  <button type="button" class="btn btn-primary" id="adv_sett_refresh">Refresh</button>
                </div>
                <div class="btn-group mr-2" role="group" aria-label="Second group">
                  <button type="button" class="btn btn-primary" id="adv_sett_save">Save</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- End Of Page Content #########################################################################-->
  <!-- Modal -->
  <div class="modal fade" id="programModal" tabindex="-1" role="dialog" aria-labelledby="programModalTitle"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="programModalTitle">Modal title</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group row no-gutters">
            <label for="program_name" class="col-form-label col-5 my-auto">Name</label>
            <input type="text" class="form-control-sm col-7 ml-auto my-auto" id="program_name">
          </div>
          <div class="form-group row no-gutters" id="sett_auto">
            <label for="program_def_sp" class="col-form-label col-5 my-auto">Default setpoint</label>
            <div class="input-group-sm col-7 ml-auto my-auto border-0">
              <input type="number" value="10" min="0" max="30" step="0.1" class="form-control" id="program_def_sp">
            </div>
          </div>
          <div class="table table-responsive">
            <table class="table table-sm table-borderless" id="periods_table">
              <thead>
                <tr class="text-center">
                  <th scope="col"> </th>
                  <th scope="col">Day</th>
                  <th scope="col">Start</th>
                  <th scope="col">End</th>
                  <th scope="col">Setpoint</th>
                  <th scope="col"> </th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <button type="button-sm" class="btn btn-default" onclick="add_prg_period(0);">
                      <i class="fa fa-plus-circle" aria-hidden="true"></i>
                    </button>
                  </td>
                  <td>
                    <select class="custom-select-sm" id="wk_day_0" onchange="update_wd_period(0);">
                      <option value="1">Mon</option>
                      <option value="2">Tue</option>
                      <option value="3">Wed</option>
                      <option value="4">Thu</option>
                      <option value="5">Fri</option>
                      <option value="6">Sat</option>
                      <option value="7">Sun</option>
                      <option value="8">All</option>
                    </select>
                  </td>
                  <td>
                    <input id="start_0" value="" class="form-control-sm text-center" style="width:5rem"
                      data-default="20:48" onmousedown="$('#start_0').clockpicker({autoclose: true});"
                      onchange="update_start_period(0);" readonly>
                  </td>
                  <td>
                    <input id="end_0" value="" class="form-control-sm text-center" style="width:5rem"
                      data-default="20:48" onmousedown="$('#end_0').clockpicker({autoclose: true});"
                      onchange="update_end_period(0);" readonly>
                  </td>
                  <td>
                    <input type="number" min="0" max="99" step="0.1" placeholder="Â°C"
                      class="form-control-sm  text-center" id="sp_0" onchange="update_sp_period(0);">
                  </td>
                  <td>
                    <button type="button-sm" class="btn btn-default" onclick="del_prg_period(0);">
                      <i class="fa fa-trash" aria-hidden="true"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>
                    <button type="button-sm" class="btn btn-default" onclick="add_prg_period(1);">
                      <i class="fa fa-plus-circle" aria-hidden="true"></i>
                    </button>
                  </td>
                  <td>
                  </td>
                  <td>
                  </td>
                  <td>
                  </td>
                  <td>
                  </td>
                  <td>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary" id="commandModalReset">Reset</button>
            <button type="button" class="btn btn-primary" id="commandModalSave">Save</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
  <!-- End of Modal -->

  </div>
  <!-- /#wrapper -->
  <!-- #spinner while awaiting for page load -->
  <div class="modal fade" id="awaiting" data-backdrop="static" data-keyboard="false" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content border-0" style="background-color: transparent;">
        <span class="spinner-border mx-auto" role="status" style="width: 3rem; height: 3rem;"></span>
      </div>
    </div>
  </div>
  <!-- /#spinner while awaiting for page load -->
  <!-- Bootstrap core JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS, then custom script -->
  <!-- don't use slim if you need ajax -->
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  <script src="bootstrap-clockpicker.min.js"></script>
  <script src="shared.min.js"></script>
  <script src="ctrl_settings.min.js"></script>
  <script type="text/javascript">
    $('#awaiting').modal('show');
  </script>
  <!-- Menu Toggle Script -->
  <script>
    $("#menu-toggle").click(function (e) {
      e.preventDefault();
      $("#wrapper").toggleClass("toggled");
    });
  </script>
</body>

</html>