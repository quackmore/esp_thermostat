function update_page(){update_summary()}function esp_get_ctrl_vars(e){$.ajax({type:"GET",url:esp8266.url+"/api/ctrl/vars",dataType:"json",crossDomain:esp8266.cors,success:function(t){e(t)},error:function(e,t,r){ajax_error(e,t,r)}})}function update_summary(){esp_get_ctrl_vars((function(e){var t=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun");$("#sm_time").text((function(){var r=new Date(1e3*e.timestamp);return r=new Date(r.getTime()+6e4*r.getTimezoneOffset()+60*e.timezone*6e4),t[r.getDay()]+" "+(r.getHours()>9?r.getHours():"0"+r.getHours())+":"+(r.getMinutes()>9?r.getMinutes():"0"+r.getMinutes())})),-500==e.current_temp?$("#sm_temp").text("--.-"):$("#sm_temp").html((e.current_temp/10).toFixed(1)+"°<small> C</small>"),-500==e.current_humi?$("#sm_humi").text("--.-"):$("#sm_humi").html((e.current_humi/10).toFixed(1)+"<small> %</small>"),$("#sm_heater_status").text((function(){return 0==e.heater_status?"heater OFF":"heater ON"}));var r=new Array("OFF","MANUAL","AUTO","PROGRAM");if($("#sm_ctrl_mode").text((function(){return"mode "+r[e.ctrl_mode]})),2==e.ctrl_mode||3==e.ctrl_mode?($("#sm_ctrl_sp").html("<small>set-point</small> "+(e.auto_setpoint/10).toFixed(1)+"°<small> C</small>"),$("#sm_ctrl_sp").removeClass("d-none")):$("#sm_ctrl_sp").addClass("d-none"),3==e.ctrl_mode?($("#sm_ctrl_program").text(e.program_name),$("#sm_ctrl_program").removeClass("d-none")):$("#sm_ctrl_program").addClass("d-none"),0==e.pwr_off_timer)$("#sm_pwr_off").addClass("d-none");else{var s=new Date,a=new Date(1e3*e.pwr_off_timer_started_on),m=Math.floor((s-a)/6e4);(s-a)%6e4>1e3&&(m+=1),(m=e.pwr_off_timer-m+1)<=0?$("#sm_pwr_off").addClass("d-none"):($("#sm_pwr_off").removeClass("d-none"),$("#sm_ctrl_pwr_off").text(m))}})),setTimeout((function(){update_summary()}),15e3)}$(document).ready((function(){setTimeout((function(){$("#awaiting").modal("hide")}),1e3),update_page()}));